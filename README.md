# 'ReToRee' Servlets With DB Project

## ğŸ“ƒì½˜í…ì¸  : ì´ì–´í° ê´€ë ¨ ì„œë¹„ìŠ¤ ë§Œì¡±ë„ì— ê´€í•œ ì„¤ë¬¸ì¡°ì‚¬ í¼

### í”„ë¡œì íŠ¸ ì„±ê²©(ì—…ë¬´ ì‹œë‚˜ë¦¬ì˜¤)

### ê°œë°œ ê¸°ê°„

- 2022ë…„ 12ì›” 27ì¼~ 2023ë…„ 1ì›” 3ì¼

### êµ¬í˜„ ì˜ìƒ
- [ì´ì–´í° í¼ êµ¬í˜„ ì˜ìƒ](ë§í¬ ì¶”ê°€ í•„ìš”)

## Members

### ğŸ‘©â€ğŸ’» ê¹€í•´ì¸ : íšŒì›ê°€ì…, íšŒì›ì¡°íšŒ
1. JSP

    -[ signup.jsp](https://github.com/seonbuzz/term_project/blob/master/src/main/resources/META-INF/resources/views/signup.jsp)

    -[ signupIdCheck.jsp](https://github.com/seonbuzz/term_project/blob/master/src/main/resources/META-INF/resources/views/signupIdCheck.jsp)

    -[ signup_submit.jsp](https://github.com/seonbuzz/term_project/blob/master/src/main/resources/META-INF/resources/views/signup_submit.jsp)

    -[ admin_userlist.jsp](https://github.com/seonbuzz/term_project/blob/master/src/main/resources/META-INF/resources/views/admin_userlist.jsp)

2. DB

    -[ AdminWithDB.java](https://github.com/seonbuzz/term_project/blob/master/src/main/java/com/retoree/term_project/dao/AdminWithDB.java)

    -[ SignupWithDB.java](https://github.com/seonbuzz/term_project/blob/master/src/main/java/com/retoree/term_project/dao/SignupWithDB.java)

3. Servlet

    -[ SignUpServlet.java](https://github.com/seonbuzz/term_project/blob/master/src/main/java/com/retoree/term_project/servlets/SignUpServlet.java)
    
    -[ SignUpSubmitServlet.java](https://github.com/seonbuzz/term_project/blob/master/src/main/java/com/retoree/term_project/servlets/SignUpSubmitServlet.java)
    
    -[ AdminUserListServlet.java](https://github.com/seonbuzz/term_project/blob/master/src/main/java/com/retoree/term_project/servlets/admin/AdminUserListServlet.java)

### ğŸ‘©â€ğŸ’» ìœ¤ì„ ì•„ : ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ, ì—ëŸ¬í˜ì´ì§€
1. JSP

    -[ login.jsp](https://github.com/seonbuzz/term_project/blob/master/src/main/resources/META-INF/resources/views/login.jsp)
    
    -[errorPage.jsp](https://github.com/seonbuzz/term_project/blob/master/src/main/resources/META-INF/resources/views/errorPage.jsp)

    -[ errorPage4.jsp](https://github.com/seonbuzz/term_project/blob/master/src/main/resources/META-INF/resources/views/errorPage4.jsp)

2. DB

    -[ Member.java](https://github.com/seonbuzz/term_project/blob/master/src/main/java/com/retoree/term_project/Bean/Member.java)
    
    -[ LoginWithDB.java](https://github.com/seonbuzz/term_project/blob/master/src/main/java/com/retoree/term_project/dao/LoginWithDB.java)

3. Servlet

    -[ LoginServlet.java](https://github.com/seonbuzz/term_project/blob/master/src/main/java/com/retoree/term_project/servlets/LoginServlet.java)
    
4. Controller

    -[ LoginController.java](https://github.com/seonbuzz/term_project/blob/master/src/main/java/com/retoree/term_project/member/controller/LoginController.java)
    
    -[ LogoutController.java](https://github.com/seonbuzz/term_project/blob/master/src/main/java/com/retoree/term_project/member/controller/LogoutController.java)


### ğŸ‘©â€ğŸ’» ë°•ë³‘ì£¼ : í†µê³„(íšŒì›/ì„¤ë¬¸ìë³„/ì§ˆë¬¸ë³„), ë©”ì¸, ì—ëŸ¬í˜ì´ì§€
1. JSP

    -[result1.jsp](https://github.com/seonbuzz/term_project/blob/master/src/main/resources/META-INF/resources/views/result1.jsp)

    -[result2.jsp](https://github.com/seonbuzz/term_project/blob/master/src/main/resources/META-INF/resources/views/result2.jsp)

    -[result3.jsp](https://github.com/seonbuzz/term_project/blob/master/src/main/resources/META-INF/resources/views/result3.jsp)

    -[errorPage2.jsp](https://github.com/seonbuzz/term_project/blob/master/src/main/resources/META-INF/resources/views/errorPage2.jsp)

    -[errorPage3.jsp](https://github.com/seonbuzz/term_project/blob/master/src/main/resources/META-INF/resources/views/errorPage3.jsp)

2. DB

    -[Member.java](https://github.com/seonbuzz/term_project/blob/master/src/main/java/com/retoree/term_project/Bean/Member.java)

    -[StatisticsWithDB.java](https://github.com/seonbuzz/term_project/blob/master/src/main/java/com/retoree/term_project/dao/StatisticsWithDB.java)

3. Servlet

    -[HomeServlet.java](https://github.com/seonbuzz/term_project/blob/master/src/main/java/com/retoree/term_project/servlets/HomeServlet.java)

    -[StatisticsPrintUserServeyServlet.java](https://github.com/seonbuzz/term_project/blob/master/src/main/java/com/retoree/term_project/servlets/StatisticsPrintUserServeyServlet.java)

    -[StatisticsServeyServlet.java](https://github.com/seonbuzz/term_project/blob/master/src/main/java/com/retoree/term_project/servlets/StatisticsServeyServlet.java)

    -[StatisticsUsersServeyServlet.java](https://github.com/seonbuzz/term_project/blob/master/src/main/java/com/retoree/term_project/servlets/StatisticsUsersServeyServlet.java)

### ğŸ‘©â€ğŸ’» ê¹€ë‹¤ì†œ : ì„¤ë¬¸
1. JSP

    -[survey.jsp](https://github.com/seonbuzz/term_project/blob/master/src/main/resources/META-INF/resources/views/survey.jsp)

    -[survey_submit.jsp](https://github.com/seonbuzz/term_project/blob/master/src/main/resources/META-INF/resources/views/survey_submit.jsp)

    -[completeSurvey.jsp](https://github.com/seonbuzz/term_project/blob/master/src/main/resources/META-INF/resources/views/completeSurvey.jsp)

2. DB

    -[SurveyWithDB.java](https://github.com/seonbuzz/term_project/blob/master/src/main/java/com/retoree/term_project/dao/SurveyWithDB.java)

3. Servlet

    -[SurveyServlet.java](https://github.com/seonbuzz/term_project/blob/master/src/main/java/com/retoree/term_project/servlets/SurveyServlet.java)

    -[SurveySubmitServlet.java](https://github.com/seonbuzz/term_project/blob/master/src/main/java/com/retoree/term_project/servlets/SurveySubmitServlet.java)


## ì£¼ìš” ì½”ë“œ
- í•´ì¸
```
<!-- ì¤‘ë³µ ì²´í¬ ì—¬ë¶€ -->
<input type="hidden" name="idCheck" value = "idUnCheck">
```
ì•„ì´ë”” ì¤‘ë³µ ì²´í¬ ì—¬ë¶€ë¥¼ ì²´í¬í•˜ê¸° ìœ„í•´ hiddenê°’ ë¶€ì—¬
```
if(request.getAttribute("idCheck") == 1) {
document.signupForm.idCheck.value = "idCheck"
```
ì•„ì´ë”” ì¤‘ë³µ ì²´í¬ ê²°ê³¼ ì‚¬ìš© ê°€ëŠ¥í•œ ì•„ì´ë””ì¼ ê²½ìš° idCheckë¡œ ê°’ ë³€ê²½
```
<form action="/SignUpSubmitServlet" method="post" name="signupForm" onsubmit="return submitForm()">

      (ìƒëµ)
      
function submitForm() {
        if(document.signupForm.user_id.value.length < 6  || document.signupForm.user_id.value.length > 16){
          alert("ì•„ì´ë””ëŠ” 6ì~16ìê¹Œì§€ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.");
          return false;
        } else if (document.signupForm.idCheck.value == "idUnCheck") {
          alert("ì•„ì´ë”” ì¤‘ë³µì²´í¬ í•„ìˆ˜ì…ë‹ˆë‹¤.");
        } else if(document.signupForm.user_pw.value != document.signupForm.user_pw_confirm.value) {
          alert("ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
          return false;
        } else if(document.signupForm.user_pw.value.length < 6  || document.signupForm.user_pw.value.length > 16) {
          alert("ë¹„ë°€ë²ˆí˜¸ëŠ” 6ì~16ìê¹Œì§€ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.");
          return false;
        } else {
          return true;
        }
      }                
```
onsubmitì„ ì´ìš©í•´ íšŒì›ê°€ì… í¼ ì œì¶œ ì‹œ ì•„ì´ë”” ì¤‘ë³µì²´í¬ ì—¬ë¶€ ë° ê¸°íƒ€ ê°’ ì„¤ì • í™•ì¸

- ì„ ì•„
```
ì¡°íšŒê²°ê³¼ê°€ ì—†ìŒ -> errorPage ì´ë™ / ì¡°íšŒê²°ê³¼ ìˆìŒ -> ë©”ì¸ í˜ì´ì§€ ì‘ë‹µ
         if (loginUser == null) {
          RequestDispatcher view = request.getRequestDispatcher("views/errorPage.jsp");
          view.forward(request, response);

           } else {
            
            // loginUserë¥¼ session ì²˜ë¦¬

           session.setAttribute("loginUser", loginUser);
           session.setAttribute("auth", loginUser.getAuth());

           RequestDispatcher view = request.getRequestDispatcher("views/welcome.jsp");
           view.forward(request, response);
          }
```

- ë³‘ì£¼
```

if (loginUser == null){
            requestDispatcher = request.getRequestDispatcher("/views/errorPage3.jsp");
            requestDispatcher.forward(request, response);
        }else{
            if(loginUser.getAuth().equals("YES")){
                requestDispatcher = request.getRequestDispatcher("/views/result2.jsp");
                request.setAttribute("loginData", httpSession.getAttribute("loginUser"));
                request.setAttribute("userNameArr", userNameArr);
                request.setAttribute("survey", survey);
                requestDispatcher.forward(request, response);
            }else{
                requestDispatcher = request.getRequestDispatcher("/views/errorPage4.jsp");
                requestDispatcher.forward(request, response);
            }

        }

```
ì„¸ì…˜ì„ ì²´í¬í•´ì„œ ë¡œê·¸ì¸ ì—¬ë¶€, ê¶Œí•œ ì²´í¬
ì„œë¸”ë¦¿ì˜ sessionê³¼ dispatcherì˜ ë‘ê°€ì§€ ê¸°ëŠ¥ìœ¼ë¡œ ê¸°ëŠ¥ì„ êµ¬í˜„

- ë‹¤ì†œ
```
```

## í”„ë¡œì íŠ¸ë¥¼ í†µí•´ ëŠë‚€ ì 
- í•´ì¸

- ì„ ì•„
> ëª¨ë“  í™ˆí˜ì´ì§€ì˜ í•„ìˆ˜ ê¸°ëŠ¥ì¸ ë¡œê·¸ì¸ì„ êµ¬í˜„í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. í•˜ë‚˜ì˜ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ê³  ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” beansë¥¼ í™œìš©í•˜ì—¬ ì¢€ ë” ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
í™”ë©´ë‹¨ì—ì„œ ifë¬¸ì„ ì¨ì„œ ë¡œê·¸ì¸ ì „ì—ëŠ” ë¡œê·¸ì¸ í™”ë©´ì„, ë¡œê·¸ì¸ í›„ì—ëŠ” ë¡œê·¸ì¸ ìœ ì € ì •ë³´ê°€ ëœ¨ëŠ” í™”ë©´ì„ êµ¬í˜„í•˜ê³  ì‹¶ì—ˆìœ¼ë‚˜ ifë¬¸ ì²˜ë¦¬ë¥¼ í•˜ë©´ ë¡œê·¸ì¸ í™”ë©´ì´ ë‘ ë²ˆ ë‚˜íƒ€ë‚˜ê²Œ ë˜ì–´ ê³¤í˜¹ì„ ê²ªì—ˆìŠµë‹ˆë‹¤. ì´ì— íŒ€ì›ë“¤ê³¼ ê³µìœ í•œ ë’¤ ë¡œê·¸ì¸ í›„ í™”ë©´í˜ì´ì§€ë¥¼ ë”°ë¡œ ì‘ì„±í•˜ëŠ” ê²ƒìœ¼ë¡œ ìˆ˜ì •í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì ë“¤ë¡œ í”„ë¡œì íŠ¸ë¥¼ í•  ë•Œ íŒ€ì›ë“¤ê³¼ì˜ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ê³¼ ë¬¸ì œì  ê³µìœ ê°€ ì¤‘ìš”í•˜ë‹¤ëŠ” ê²ƒì„ ê¹¨ë‹¬ì•˜ìŠµë‹ˆë‹¤. 

- ë³‘ì£¼

- ë‹¤ì†œ
